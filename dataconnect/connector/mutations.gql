# ------------------------------------------------------------------
# Mutations - For creating, updating, and deleting data.
# ------------------------------------------------------------------

# Mutation for a new user to complete their profile.
mutation CompleteUserProfile(
  $userId: String!
  $fullName: String!
  $role: UserRole!
) @auth(level: USER) {
  updateUser(
    id: $userId
    input: { fullName: $fullName, role: $role }
  ) {
    id
  }
}

# Mutation for a therapist to update their profile.
mutation UpdateTherapistProfile(
  $therapistId: UUID!
  $bio: String
  $specialties: [String!]
  $location: String
  $hourlyRate: Float
) @auth(level: USER) {
  updateTherapist(
    id: $therapistId
    input: {
      bio: $bio
      specialties: $specialties
      location: $location
      hourlyRate: $hourlyRate
    }
  ) {
    id
  }
}

# Mutation for a client to book an appointment with a therapist.
mutation BookAppointment(
  $therapistId: UUID!
  $clinicSpaceId: UUID!
  $startTime: Timestamp!
  $endTime: Timestamp!
  $clientId: String!
) @auth(level: USER) {
  insertBooking(
    input: {
      therapistId: $therapistId
      clinicSpaceId: $clinicSpaceId
      startTime: $startTime
      endTime: $endTime
      clientId: $clientId
    }
  ) {
    id
    status
  }
}

# Mutation for a client to leave a review for a therapist.
mutation LeaveReview(
  $therapistId: UUID!
  $rating: Int!
  $comment: String
  $clientId: String!
) @auth(level: USER) {
  insertReview(
    input: {
      therapistId: $therapistId
      rating: $rating
      comment: $comment
      clientId: $clientId
    }
  ) {
    rating
  }
}

# Mutation for a clinic owner to add a new clinic.
mutation AddClinic(
  $name: String!
  $location: String!
  $contactEmail: String
  $ownerId: String!
) @auth(level: USER) {
  insertClinic(
    input: {
      name: $name
      location: $location
      contactEmail: $contactEmail
      ownerId: $ownerId
    }
  ) {
    id
  }
}